<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informations Pratiques - Vernon Tourisme</title>
    <link rel="stylesheet" href="main.css">
    <script src="composants/header/header.js"></script>
    <script src="composants/footer/footer.js"></script>
</head>
<body>
    <!-- Main Content -->
    <main>
        <div class="container">
            <h1 class="page-title">Informations Pratiques</h1>
            <p class="page-intro">
                Toutes les informations essentielles pour pr√©parer votre visite √† Vernon et profiter pleinement de votre s√©jour en Normandie.
            </p>

            <!-- Info Grid -->
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-item-icon">üìç</div>
                    <h3>Localisation</h3>
                    <p>Vernon se situe dans l'Eure, en Normandie, √† seulement 45 minutes de Paris en train. Un cadre id√©al pour une escapade culturelle au c≈ìur de la vall√©e de la Seine.</p>
                </div>
                
                <div class="info-item">
                    <div class="info-item-icon">üïí</div>
                    <h3>Horaires des Sites</h3>
                    <p><strong>Haute saison (Avril-Octobre) :</strong><br>
                    9h30 - 18h00<br>
                    <strong>Basse saison (Novembre-Mars) :</strong><br>
                    10h00 - 17h00<br>
                    <strong>Ferm√©s :</strong> 1er janvier, 1er mai, 25 d√©cembre</p>
                </div>
                
                <div class="info-item">
                    <div class="info-item-icon">üé´</div>
                    <h3>Tarifs</h3>
                    <p><strong>Adulte :</strong> 8‚Ç¨<br>
                    <strong>√âtudiant/Senior :</strong> 6‚Ç¨<br>
                    <strong>Enfant (-12 ans) :</strong> Gratuit<br>
                    <strong>Pass Vernon :</strong> 15‚Ç¨<br>
                    <em>Tarifs de groupe disponibles</em></p>
                </div>
                
                <div class="info-item">
                    <div class="info-item-icon">üè®</div>
                    <h3>H√©bergement</h3>
                    <p>H√¥tels, chambres d'h√¥tes, g√Ætes ruraux et campings. R√©servation conseill√©e en haute saison. Contactez l'office de tourisme pour nos recommandations.</p>
                </div>
                
                <div class="info-item">
                    <div class="info-item-icon">üçΩÔ∏è</div>
                    <h3>Restauration</h3>
                    <p>Restaurants traditionnels, brasseries, caf√©s et sp√©cialit√©s normandes. D√©couvrez les produits du terroir : cidre, calvados, fromages et pommes.</p>
                </div>
                
                <div class="info-item">
                    <div class="info-item-icon">üõçÔ∏è</div>
                    <h3>Shopping</h3>
                    <p>Boutiques d'artisanat local, librairies, souvenirs et produits r√©gionaux. March√© traditionnel le samedi matin place de la R√©publique.</p>
                </div>
            </div>

            <!-- Transportation Section -->
            <div class="transportation">
                <div class="container">
                    <h2>Comment venir √† Vernon</h2>
                    <div class="transport-grid">
                        <div class="transport-item">
                            <h3>üöó En Voiture</h3>
                            <ul>
                                <li>Autoroute A13 sortie 16</li>
                                <li>1h depuis Paris</li>
                                <li>Parkings gratuits en centre-ville</li>
                                <li>Aire de stationnement camping-cars</li>
                            </ul>
                        </div>
                        
                        <div class="transport-item">
                            <h3>üöÇ En Train</h3>
                            <ul>
                                <li>Gare Paris Saint-Lazare</li>
                                <li>Trajet : 45 minutes</li>
                                <li>Trains toutes les heures</li>
                                <li>Gare √† 10 min √† pied du centre</li>
                            </ul>
                        </div>
                        
                        <div class="transport-item">
                            <h3>üöå En Bus</h3>
                            <ul>
                                <li>R√©seau interurbain de l'Eure</li>
                                <li>Lignes r√©guli√®res</li>
                                <li>Arr√™ts en centre-ville</li>
                                <li>Tarifs pr√©f√©rentiels</li>
                            </ul>
                        </div>
                        
                        <div class="transport-item">
                            <h3>üö¥ √Ä V√©lo</h3>
                            <ul>
                                <li>Piste cyclable Seine √† V√©lo</li>
                                <li>Location de v√©los disponible</li>
                                <li>Parking v√©los s√©curis√©</li>
                                <li>Parcours balis√©s</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Map Section -->
            <div class="map-section">
                <div class="container">
                    <h2>Localisation et Points d'Int√©r√™t</h2>
                    <p class="map-description">
                        D√©couvrez Vernon et ses environs. La carte interactive vous permet de localiser les principaux sites touristiques, 
                        l'office de tourisme, les parkings et les services pratiques.
                    </p>
                    <div id="map"></div>
                </div>
            </div>

            <!-- Weather Section -->
            <div class="weather">
                <div class="container">
                    <h2>Climat et Saisons</h2>
                    <div class="weather-grid">
                        <div class="weather-item">
                            <h3>üå∏ Printemps</h3>
                            <p>Mars - Mai<br>
                            Doux et fleuri<br>
                            15-20¬∞C<br>
                            Id√©al pour les jardins</p>
                        </div>
                        
                        <div class="weather-item">
                            <h3>‚òÄÔ∏è √ât√©</h3>
                            <p>Juin - Ao√ªt<br>
                            Chaud et ensoleill√©<br>
                            20-25¬∞C<br>
                            Haute saison</p>
                        </div>
                        
                        <div class="weather-item">
                            <h3>üçÇ Automne</h3>
                            <p>Septembre - Novembre<br>
                            Color√© et paisible<br>
                            15-18¬∞C<br>
                            Moins de monde</p>
                        </div>
                        
                        <div class="weather-item">
                            <h3>‚ùÑÔ∏è Hiver</h3>
                            <p>D√©cembre - F√©vrier<br>
                            Frais et authentique<br>
                            5-10¬∞C<br>
                            Charme hivernal</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Le footer sera charg√© dynamiquement via composant/footer.js -->

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Leaflet Map Script -->
    <script>
        let map;
        let routingControl;

        function initMap() {
            // Coordonn√©es de Vernon
            const vernon = [49.0942, 1.4844];
            
            // Initialisation de la carte Leaflet
            map = L.map('map').setView(vernon, 14);

            // Ajout des tuiles OpenStreetMap
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            // Ic√¥ne personnalis√©e pour les marqueurs
            const customIcon = L.divIcon({
                className: 'custom-marker',
                html: `<div style="
                    background: #e74c3c;
                    width: 30px;
                    height: 30px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-weight: bold;
                    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
                    border: 2px solid white;
                ">üìç</div>`,
                iconSize: [30, 30],
                iconAnchor: [15, 15]
            });

            // Points d'int√©r√™t
            const attractions = [
                {
                    position: [49.0942, 1.4844],
                    title: "Office de Tourisme",
                    content: "<h3>Office de Tourisme de Vernon</h3><p>36 rue Carnot<br>27200 Vernon</p>"
                },
                {
                    position: [49.0935, 1.4850],
                    title: "Coll√©giale Notre-Dame",
                    content: "<h3>Coll√©giale Notre-Dame</h3><p>Monument historique du XIe si√®cle</p>"
                },
                {
                    position: [49.0920, 1.4830],
                    title: "Vieux Moulin",
                    content: "<h3>Vieux Moulin</h3><p>Monument embl√©matique du XVIe si√®cle</p>"
                },
                {
                    position: [49.0945, 1.4835],
                    title: "Ch√¢teau des Tourelles",
                    content: "<h3>Ch√¢teau des Tourelles</h3><p>Vestiges de la forteresse m√©di√©vale</p>"
                },
                {
                    position: [49.0938, 1.4860],
                    title: "Mus√©e A.G. Poulain",
                    content: "<h3>Mus√©e A.G. Poulain</h3><p>Art et histoire locale</p>"
                },
                {
                    position: [49.0748, 1.5334],
                    title: "Jardins de Giverny",
                    content: "<h3>Jardins de Claude Monet</h3><p>√Ä 5 km de Vernon</p>"
                }
            ];

            // Ajout des marqueurs
            attractions.forEach(attraction => {
                const marker = L.marker(attraction.position, { icon: customIcon })
                    .addTo(map)
                    .bindPopup(attraction.content);
            });

            // Contr√¥les personnalis√©s pour l'itin√©raire
            const routeControl = L.control({ position: 'topleft' });
            routeControl.onAdd = function(map) {
                const div = L.DomUtil.create('div', 'route-control');
                div.style.cssText = `
                    background: white;
                    padding: 10px;
                    border-radius: 5px;
                    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
                    margin: 10px;
                `;
                
                div.innerHTML = `
                    <input type="text" id="route-input" placeholder="Entrez votre adresse de d√©part" style="
                        width: 250px;
                        padding: 8px;
                        border: 2px solid #ddd;
                        border-radius: 5px;
                        font-size: 14px;
                        margin-bottom: 5px;
                    ">
                    <br>
                    <button id="route-button" style="
                        padding: 8px 16px;
                        background: #e74c3c;
                        color: white;
                        border: none;
                        border-radius: 5px;
                        cursor: pointer;
                        font-size: 14px;
                    ">üöó Calculer l'itin√©raire</button>
                    <button id="clear-route" style="
                        padding: 8px 16px;
                        background: #95a5a6;
                        color: white;
                        border: none;
                        border-radius: 5px;
                        cursor: pointer;
                        font-size: 14px;
                        margin-left: 5px;
                    ">üóëÔ∏è Effacer</button>
                `;
                
                return div;
            };
            routeControl.addTo(map);

            // Gestionnaires d'√©v√©nements pour l'itin√©raire
            document.getElementById('route-button').addEventListener('click', calculateRoute);
            document.getElementById('clear-route').addEventListener('click', clearRoute);
            document.getElementById('route-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    calculateRoute();
                }
            });
        }

        function calculateRoute() {
            const origin = document.getElementById('route-input').value;
            if (!origin) {
                alert('Veuillez entrer une adresse de d√©part');
                return;
            }

            // G√©ocodage simple avec Nominatim (OpenStreetMap)
            fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(origin)}`)
                .then(response => response.json())
                .then(data => {
                    if (data.length > 0) {
                        const originCoords = [parseFloat(data[0].lat), parseFloat(data[0].lon)];
                        const destinationCoords = [49.0942, 1.4844]; // Vernon
                        
                        // Effacer l'itin√©raire pr√©c√©dent
                        clearRoute();
                        
                        // Cr√©er une ligne simple entre les deux points
                        const routeLine = L.polyline([originCoords, destinationCoords], {
                            color: '#e74c3c',
                            weight: 4,
                            opacity: 0.7
                        }).addTo(map);
                        
                        // Ajouter des marqueurs
                        const startMarker = L.marker(originCoords)
                            .addTo(map)
                            .bindPopup('üöÄ D√©part: ' + origin);
                        
                        const endMarker = L.marker(destinationCoords)
                            .addTo(map)
                            .bindPopup('üéØ Arriv√©e: Vernon');
                        
                        // Ajuster la vue pour inclure l'itin√©raire
                        const group = L.featureGroup([routeLine, startMarker, endMarker]);
                        map.fitBounds(group.getBounds().pad(0.1));
                        
                        // Stocker pour pouvoir effacer
                        window.currentRoute = {
                            line: routeLine,
                            startMarker: startMarker,
                            endMarker: endMarker
                        };
                        
                        // Calculer la distance approximative
                        const distance = map.distance(originCoords, destinationCoords);
                        alert(`Itin√©raire calcul√© ! Distance approximative: ${(distance / 1000).toFixed(1)} km`);
                    } else {
                        alert('Adresse non trouv√©e. Veuillez v√©rifier votre saisie.');
                    }
                })
                .catch(error => {
                    console.error('Erreur lors du g√©ocodage:', error);
                    alert('Erreur lors du calcul de l\'itin√©raire.');
                });
        }

        function clearRoute() {
            if (window.currentRoute) {
                map.removeLayer(window.currentRoute.line);
                map.removeLayer(window.currentRoute.startMarker);
                map.removeLayer(window.currentRoute.endMarker);
                window.currentRoute = null;
            }
            document.getElementById('route-input').value = '';
        }

        // Initialisation de la carte au chargement
        document.addEventListener('DOMContentLoaded', initMap);
    </script>
</body>
</html>
